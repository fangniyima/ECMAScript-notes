## <center>11 æºä»£ç </center>
### æºæ–‡æœ¬ Source Text
### Syntax
    SourceCharacter::
        any Unicode code point

ECMAScriptä»£ç ä½¿ç”¨Unicodeè¡¨ç¤ºã€‚ECMAScriptæºæ–‡æœ¬æ˜¯ä¸€ç³»åˆ—ä»£ç ç‚¹ã€‚ä»U+0000åˆ°U+10FFFFçš„æ‰€æœ‰Unicodeç ä½å€¼,åŒ…æ‹¬ä»£ç†ç ä½,éƒ½å¯èƒ½å‡ºç°åœ¨ECMAScriptè¯­æ³•å…è®¸çš„æºæ–‡æœ¬ä¸­ã€‚ç”¨äºå­˜å‚¨å’Œäº¤æ¢ECMAScriptæºæ–‡æœ¬çš„å®é™…ç¼–ç ä¸æ­¤è§„èŒƒæ— å…³ã€‚ä¸ç®¡å¤–éƒ¨æºæ–‡æœ¬ç¼–ç æ˜¯ä»€ä¹ˆ,ä¸€è‡´çš„ECMAScriptå®ç°éƒ½ä¼šå°†æºæ–‡æœ¬å¤„ç†ä¸ºä¸€ä¸ªç­‰æ•ˆçš„SourceCharacterå€¼åºåˆ—,æ¯ä¸ªSourceCharacteréƒ½æ˜¯ä¸€ä¸ªUnicodeä»£ç ç‚¹ã€‚ä¸€è‡´çš„ECMAScriptå®ç°ä¸éœ€è¦å¯¹æºæ–‡æœ¬æ‰§è¡Œä»»ä½•è§„èŒƒåŒ–,æˆ–è€…è¡¨ç°å¾—å¥½åƒåœ¨æ‰§è¡Œæºæ–‡æœ¬çš„è§„èŒƒåŒ–ä¸€æ ·ã€‚

ç»„åˆå­—ç¬¦åºåˆ—çš„ç»„æˆéƒ¨åˆ†è¢«è§†ä¸ºå•ä¸ªUnicodeä»£ç ç‚¹,å³ä½¿ç”¨æˆ·å¯èƒ½è®¤ä¸ºæ•´ä¸ªåºåˆ—æ˜¯å•ä¸ªå­—ç¬¦ã€‚
æ³¨æ„

>NOTE åœ¨å­—ç¬¦ä¸²æ–‡æœ¬ã€æ­£åˆ™è¡¨è¾¾å¼æ–‡æœ¬ã€æ¨¡æ¿æ–‡æœ¬å’Œæ ‡è¯†ç¬¦ä¸­,è¿˜å¯ä»¥ä½¿ç”¨æ˜¾å¼è¡¨ç¤ºä»£ç ç‚¹æ•°å€¼çš„Unicodeè½¬ä¹‰åºåˆ—æ¥è¡¨ç¤ºä»»ä½•Unicodeä»£ç ç‚¹ã€‚åœ¨æ³¨é‡Šä¸­,è¿™ç§è½¬ä¹‰åºåˆ—ä½œä¸ºæ³¨é‡Šçš„ä¸€éƒ¨åˆ†å®é™…ä¸Šè¢«å¿½ç•¥äº†ã€‚

>NOTE ECMAScriptä¸Javaç¼–ç¨‹è¯­è¨€åœ¨Unicodeè½¬ä¹‰åºåˆ—çš„è¡Œä¸ºä¸Šæœ‰æ‰€ä¸åŒã€‚ä¾‹å¦‚,åœ¨Javaç¨‹åºä¸­,å¦‚æœUnicodeè½¬ä¹‰åºåˆ—\u000Aå‡ºç°åœ¨å•è¡Œæ³¨é‡Šä¸­,åˆ™å®ƒè¢«è§£é‡Šä¸ºè¡Œç»ˆæ­¢ç¬¦(Unicodeä»£ç ç‚¹U+000Aæ˜¯æ¢è¡Œç¬¦(LF)),å› æ­¤ä¸‹ä¸€ä¸ªä»£ç ç‚¹ä¸æ˜¯æ³¨é‡Šçš„ä¸€éƒ¨åˆ†ã€‚ç±»ä¼¼åœ°,å¦‚æœUnicodeè½¬ä¹‰åºåˆ—\u000Aå‡ºç°åœ¨Javaç¨‹åºä¸­çš„å­—ç¬¦ä¸²æ–‡æœ¬ä¸­,åˆ™å®ƒåŒæ ·è¢«è§£é‡Šä¸ºè¡Œç»ˆæ­¢ç¬¦,è¿™æ˜¯å­—ç¬¦ä¸²æ–‡æœ¬ä¸­ä¸å…è®¸çš„,å¿…é¡»å†™å…¥è€Œä¸æ˜¯\u000Aæ‰èƒ½ä½¿æ¢è¡Œç¬¦(LF)æˆä¸ºå­—ç¬¦ä¸²æ–‡æœ¬å­—ç¬¦ä¸²å€¼çš„ä¸€éƒ¨åˆ†ã€‚åœ¨ECMAScriptç¨‹åºä¸­,æ³¨é‡Šä¸­å‡ºç°çš„Unicodeè½¬ä¹‰åºåˆ—ä»ä¸è¢«è§£é‡Š,å› æ­¤ä¸èƒ½å¯¼è‡´æ³¨é‡Šçš„ç»ˆæ­¢ã€‚ç±»ä¼¼åœ°,å‡ºç°åœ¨ECMAScriptç¨‹åºä¸­çš„å­—ç¬¦ä¸²æ–‡æœ¬ä¸­çš„Unicodeè½¬ä¹‰åºåˆ—å§‹ç»ˆæœ‰åŠ©äºè¯¥æ–‡æœ¬,è€Œä¸ä¼šè¢«è§£é‡Šä¸ºè¡Œç»ˆæ­¢ç¬¦æˆ–å¯èƒ½ç»ˆæ­¢å­—ç¬¦ä¸²æ–‡æœ¬çš„ä»£ç ç‚¹ã€‚


### 11.1.1 Static Semantics: UTF16EncodeCodePoint ( cp )

æŠ½è±¡æ“ä½œutf16encodepointæ¥å—å‚æ•°cp(Unicodeä»£ç ç‚¹)ã€‚å®ƒåœ¨è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š
    
1. æ–­è¨€ï¼š0â‰¤cpâ‰¤0x10FFFFã€‚
2. å¦‚æœcpâ‰¤0xFFFF,åˆ™è¿”å›ç”±å€¼ä¸ºcpçš„ä»£ç å•å…ƒç»„æˆçš„å­—ç¬¦ä¸²å€¼ã€‚
3. è®¾cu1ä¸ºä»£ç å•ä½,å…¶å€¼ä¸ºfloor((cp-0x10000)/0x400)+0xD800ã€‚
4. è®¾cu2ä¸ºä»£ç å•ä½,å…¶å€¼ä¸º((cp-0x10000)%0x400)+0xDC00ã€‚
5. è¿”å›cu1å’Œcu2çš„å­—ç¬¦ä¸²è¿æ¥ã€‚

    è¯´æ˜:æ›´å¤šå­—ç¬¦æŸ¥çœ‹https://home.unicode.org/
    String.fromCodePointæ–¹æ³•æ¶‰åŠæ­¤ç®—æ³•æ­¥éª¤
    console.log(String.fromCodePoint(0x1F303));          //ğŸŒƒ  
    var H = (Math.floor((0x1F303-0x10000)/0x400)+0xD800).toString(16)   //d83c
    var L = ((0x1F303-0x10000) % 0x400+0xDC00).toString(16)             //df03
    '\ud83c\udf03'                                       //ğŸŒƒ
    

### 11.1.2 Static Semantics: CodePointsToString ( text )

æŠ½è±¡æ“ä½œCodePointsToStringæ¥å—å‚æ•°æ–‡æœ¬(ä¸€ç³»åˆ—Unicodeä»£ç ç‚¹)ã€‚å®ƒå°†æ–‡æœ¬è½¬æ¢ä¸ºå­—ç¬¦ä¸²å€¼,å¦‚6.1.4æ‰€è¿°ã€‚å®ƒåœ¨è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š
    
1. ä»¤resultä¸ºç©ºå­—ç¬¦ä¸²
2. ä»textä¸­å¾ªç¯ç ç‚¹cp,
    - å°† result è®¾ç½®ä¸º result å’Œ ! UTF16EncodeCodePoint(cp)ã€‚
3. è¿”å›result

```
String.prototype.toLowerCase()æ–¹æ³•ä¼šæ¶‰åŠæ­¤ç®—æ³•,ä½†æ˜¯éœ€è¦æ³¨æ„,æŸäº›ä»£ç ç‚¹çš„å¤§å°å†™æ˜ å°„å¯èƒ½ä¼šç”Ÿæˆå¤šä¸ªä»£ç ç‚¹ä¹Ÿå°±æ˜¯è¯´s.toUpperCase().toLowerCase()ä¸ä¸€å®šç­‰äºs.toLowerCase()

String.fromCodePoint(223).normalize("NFKC").toLowerCase()   //"ÃŸ"
String.fromCodePoint(223).normalize("NFKC").toUpperCase().toLowerCase() //ss
```    

### 11.1.3 Static Semantics: UTF16SurrogatePairToCodePoint ( lead, trail )

æŠ½è±¡æ“ä½œUTF16SurrogatePairToCodePointæ¥å—å‚æ•°lead(ä¸€ä¸ªä»£ç å•å…ƒ)å’Œtrail(ä¸€ä¸ªä»£ç å•å…ƒ)ã€‚ç»„æˆUTF-16ä»£ç†é¡¹å¯¹çš„ä¸¤ä¸ªä»£ç å•å…ƒè¢«è½¬æ¢ä¸ºä¸€ä¸ªä»£ç ç‚¹ã€‚å®ƒåœ¨è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. æ–­è¨€ï¼šleadæ˜¯ä¸€ä¸ªå‰å¯¼ä»£ç†,trailæ˜¯ä¸€ä¸ªå°¾éƒ¨ä»£ç†ã€‚
2. è®¾cpä¸º(lead-0xD800)Ã—0x400+(trail-0xDC00)+0x10000ã€‚
3. è¿”å›ä»£ç ç‚¹cpã€‚

### 11.1.4 Static Semantics: CodePointAt ( string, position )

æŠ½è±¡æ“ä½œ CodePointAt æ¥å—å‚æ•°å­—ç¬¦ä¸²ï¼ˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼‰å’Œä½ç½®ï¼ˆä¸€ä¸ªéè´Ÿæ•´æ•°ï¼‰å¹¶è¿”å›ä¸€ä¸ªåŒ…å«å­—æ®µ [[CodePoint]]ï¼ˆä»£ç ç‚¹ï¼‰ã€[[CodeUnitCount]]ï¼ˆæ­£æ•´æ•°ï¼‰å’Œ [ [IsUnpairedSurrogate]]ï¼ˆå¸ƒå°”å€¼ï¼‰ã€‚ å®ƒå°†å­—ç¬¦ä¸²è§£é‡Šä¸º UTF-16 ç¼–ç ä»£ç ç‚¹çš„åºåˆ—ï¼Œå¦‚ 6.1.4 ä¸­æ‰€è¿°ï¼Œå¹¶ä»ä¸­è¯»å–ä»¥ç´¢å¼•ä½ç½®çš„ä»£ç å•å…ƒå¼€å§‹çš„å•ä¸ªä»£ç ç‚¹ã€‚ å®ƒåœ¨è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

Let size be the length of string.
2. Assert: position â‰¥ 0 and position < size.
3. Let first be the code unit at index position within string.
4. Let cp be the code point whose numeric value is that of first.
5. If first is not a leading surrogate or trailing surrogate, then
    - Return the Record { [[CodePoint]]: cp, [[CodeUnitCount]]: 1, [[IsUnpairedSurrogate]]: false }.
6. If first is a trailing surrogate or position + 1 = size, then
    - Return the Record { [[CodePoint]]: cp, [[CodeUnitCount]]: 1, [[IsUnpairedSurrogate]]: true }.
7. Let second be the code unit at index position + 1 within string.
8. If second is not a trailing surrogate, then
    - Return the Record { [[CodePoint]]: cp, [[CodeUnitCount]]: 1, [[IsUnpairedSurrogate]]: true }.
9. Set cp to UTF16SurrogatePairToCodePoint(first, second).
10. Return the Record { [[CodePoint]]: cp, [[CodeUnitCount]]: 2, [[IsUnpairedSurrogate]]: false }.

    è¯´æ˜:String.prototype.codePointAt()æ–¹æ³•ä¼šæ¶‰åŠæ­¤ç®—æ³•
    1. ä»¤sizeä¸ºå­—ç¬¦ä¸²çš„é•¿åº¦ã€‚
    2. æ–­è¨€ï¼špositionâ‰¥0ä¸”position<sizeã€‚
    3. ä»¤firstæ˜¯å­—ç¬¦ä¸²ä¸­ç´¢å¼•positionçš„ä»£ç å•å…ƒã€‚
    4. ä»¤cpä¸ºfirstçš„ç ä½çš„æ•°å€¼ã€‚
    5. å¦‚æœfirstä¸æ˜¯å‰å¯¼ä»£ç†æˆ–åä»£ç†,åˆ™
        1. è¿”å›Record{[[CodePoint]]ï¼šcp,[[CodeUnitCount]]ï¼š1,[[IsUnpairedSurrogate]]ï¼šfalse}ã€‚
    6. å¦‚æœç¬¬ä¸€ä¸ªæ˜¯å°¾éšçš„ä»£ç†é¡¹æˆ–position+1=size,åˆ™
        1. è¿”å›Record{[[CodePoint]]ï¼šcp,[[CodeUnitCount]]ï¼š1,[[IsUnpairedSurrogate]]ï¼štrue}ã€‚
    7. ä»¤secondæ˜¯å­—ç¬¦ä¸²ä¸­ç´¢å¼•position+1å¤„çš„ä»£ç å•å…ƒã€‚
    8. å¦‚æœsecondä¸æ˜¯å°¾éšçš„ä»£ç†é¡¹,åˆ™
        1. è¿”å›è®°å½•{[[CodePoint]]ï¼šcp,[[CodeUnitCount]]ï¼š1,[[IsUnpairedSurrogate]]ï¼štrue}ã€‚
    9. å°†cpè®¾ç½®ä¸ºï¼UTF16SurrogateTapirtocodepoint(first, second)ã€‚
    10. è¿”å›Record{[[CodePoint]]ï¼šcp,[[CodeUnitCount]]ï¼š2,[[IsUnpairedSurrogate]]ï¼šfalse}ã€‚

### 11.1.5 Static Semantics: StringToCodePoints ( string )

æŠ½è±¡æ“ä½œStringToCodePointsæ¥å—å‚æ•°string(ä¸€ä¸ªå­—ç¬¦ä¸²)ã€‚å®ƒè¿”å›å°†å­—ç¬¦ä¸²è§£é‡Šä¸ºUTF-16ç¼–ç çš„Unicodeæ–‡æœ¬çš„Unicodeä»£ç ç‚¹åºåˆ—,å¦‚6.1.4æ‰€è¿°ã€‚å®ƒåœ¨è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

    1. Let codePoints be a new empty List.
    2. Let size be the length of string.
    3. Let position be 0.
    4. Repeat, while position < size,
        1. Let cp be ! CodePointAt(string, position).
        2. Append cp.[[CodePoint]] to codePoints.
        3. Set position to position + cp.[[CodeUnitCount]].
    5. Return codePoints.

    è¯´æ˜:String.prototype.toLowerCaseä¼šæ¶‰åŠæ­¤ç®—æ³•

    1. è®©codePointsæˆä¸ºä¸€ä¸ªæ–°çš„ç©ºåˆ—è¡¨ã€‚
    2. è®¾sizeä¸ºå­—ç¬¦ä¸²çš„é•¿åº¦ã€‚
    3. è®¾ä½ç½®ä¸º0ã€‚
    4. é‡å¤,å½“position<sizeæ—¶,
        ä»¤cpä¸ºï¼CodePointAt(string, position)ã€‚
        å°†cp.[[CodePoint]]é™„åŠ åˆ°codePointsã€‚
        å°†positionè®¾ç½®ä¸ºposition+cp.[[CodeUnitCount]]ã€‚
    5. è¿”å›codePointsã€‚

### 11.1.6 Static Semantics: ParseText ( sourceText, goalSymbol )

æŠ½è±¡æ“ä½œ ParseText æ¥å—å‚æ•° sourceTextï¼ˆUnicode ä»£ç ç‚¹åºåˆ—ï¼‰å’Œ goalSymbolï¼ˆECMAScript è¯­æ³•ä¹‹ä¸€ä¸­çš„éç»ˆç»“ç¬¦ï¼‰ã€‚ å®ƒåœ¨è°ƒç”¨æ—¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. å°è¯•ä½¿ç”¨goalSymbol ä½œä¸ºç›®æ ‡ç¬¦å·è§£æsourceTextï¼Œå¹¶åˆ†æè§£æç»“æœæ˜¯å¦å­˜åœ¨ä»»ä½•æ—©æœŸé”™è¯¯æƒ…å†µã€‚ è§£æå’Œæ—©æœŸé”™è¯¯æ£€æµ‹å¯ä»¥ä»¥å®ç°å®šä¹‰çš„æ–¹å¼äº¤ç»‡åœ¨ä¸€èµ·ã€‚
2. å¦‚æœè§£ææˆåŠŸå¹¶ä¸”æ²¡æœ‰å‘ç°æ—©æœŸé”™è¯¯ï¼Œåˆ™è¿”å›è§£æç»“æœè§£ææ ‘æ ¹çš„è§£æèŠ‚ç‚¹ï¼ˆgoalSymbol çš„ä¸€ä¸ªå®ä¾‹ï¼‰ã€‚
3. å¦åˆ™ï¼Œè¿”å›ä»£è¡¨è§£æé”™è¯¯å’Œ/æˆ–æ—©æœŸé”™è¯¯çš„ä¸€ä¸ªæˆ–å¤šä¸ª SyntaxError å¯¹è±¡çš„åˆ—è¡¨ã€‚ å¦‚æœå­˜åœ¨å¤šä¸ªè§£æé”™è¯¯æˆ–æ—©æœŸé”™è¯¯ï¼Œåˆ™åˆ—è¡¨ä¸­é”™è¯¯å¯¹è±¡çš„æ•°é‡å’Œé¡ºåºæ˜¯å®ç°å®šä¹‰çš„ï¼Œä½†å¿…é¡»è‡³å°‘å­˜åœ¨ä¸€ä¸ªã€‚

>NOTE1 è€ƒè™‘ä¸€ä¸ªåœ¨ç‰¹å®šç‚¹æœ‰æ—©æœŸé”™è¯¯çš„æ–‡æœ¬ï¼Œå¹¶ä¸”åœ¨ç¨åçš„ç‚¹ä¹Ÿæœ‰è¯­æ³•é”™è¯¯ã€‚ æ‰§è¡Œè§£æä¼ é€’å’Œæ—©æœŸé”™è¯¯ä¼ é€’çš„å®ç°å¯èƒ½ä¼šæŠ¥å‘Šè¯­æ³•é”™è¯¯å¹¶ä¸”ä¸ä¼šç»§ç»­è¿›è¡Œæ—©æœŸé”™è¯¯ä¼ é€’ã€‚ å°†è¿™ä¸¤ä¸ªæ´»åŠ¨äº¤é”™çš„å®ç°å¯èƒ½ä¼šæŠ¥å‘Šæ—©æœŸé”™è¯¯ï¼Œå¹¶ä¸”ä¸ä¼šç»§ç»­æŸ¥æ‰¾è¯­æ³•é”™è¯¯ã€‚ ç¬¬ä¸‰ç§å®ç°å¯èƒ½ä¼šåŒæ—¶æŠ¥å‘Šè¿™ä¸¤ä¸ªé”™è¯¯ã€‚ æ‰€æœ‰è¿™äº›è¡Œä¸ºéƒ½ç¬¦åˆè¦æ±‚ã€‚

>NOTE2 å¦è§ç¬¬ 17 æ¡ã€‚

## 11.2 Types of Source Code

ECMAScriptä»£ç æœ‰å››ç§ç±»å‹ï¼š

- å…¨å±€ä»£ç æ˜¯è¢«è§†ä¸ºECMAScriptè„šæœ¬çš„æºæ–‡æœ¬ã€‚ ç‰¹å®šè„šæœ¬çš„å…¨å±€ä»£ç ä¸åŒ…æ‹¬ä½œä¸ºFunctionDeclaration,FunctionExpression,GeneratorDeclaration,GeneratorExpression,AsyncFunctionDeclaration,AsyncFunctionExpression,AsyncGeneratorDeclaration,AsyncGeneratorExpression,MethodDefinition,ArrowFunction,AsyncArrowFunction,ClassDeclarationæˆ–ClassExpressionçš„ä¸€éƒ¨åˆ†è§£æçš„ä»»ä½•æºæ–‡æœ¬ã€‚

- Eval codeæ˜¯æä¾›ç»™å†…ç½®Evalå‡½æ•°çš„æºæ–‡æœ¬ã€‚æ›´ç¡®åˆ‡åœ°è¯´,å¦‚æœå†…ç½®evalå‡½æ•°çš„å‚æ•°æ˜¯å­—ç¬¦ä¸²,åˆ™å°†å…¶è§†ä¸ºECMAScriptè„šæœ¬ã€‚ç‰¹å®ševalè°ƒç”¨çš„evalä»£ç æ˜¯è¯¥è„šæœ¬çš„å…¨å±€ä»£ç éƒ¨åˆ†ã€‚

- å‡½æ•°ä»£ç æ˜¯æºæ–‡æœ¬,å®ƒè¢«è§£æä¸ºæä¾›ECMAScriptå‡½æ•°å¯¹è±¡çš„[[ECMAScriptCode]]å’Œ[[FormalParameters]]å†…éƒ¨æ§½çš„å€¼(è§10.2)ã€‚ç‰¹å®šECMAScriptå‡½æ•°çš„å‡½æ•°ä»£ç ä¸åŒ…æ‹¬ä»»ä½•è¢«åˆ†æä¸ºåµŒå¥—FunctionDeclarationã€FunctionExpressionã€GeneratorDeclarationã€GeneratorExpressionã€AsyncFunctionDeclarationã€AsyncyGeneratorDeclarationã€AsyncGeneratorExpressionã€MethodDefinitionçš„å‡½æ•°ä»£ç ,ArrowFunctionã€AsyncArrowFunctionã€ClassDeclarationæˆ–ClassExpressionã€‚

æ­¤å¤–,å¦‚æœä¸Šè¿°æºæ–‡æœ¬è¢«è§£æä¸ºï¼š

- - the FormalParameters and FunctionBody of a FunctionDeclaration or FunctionExpression,
- - the FormalParameters and GeneratorBody of a GeneratorDeclaration or GeneratorExpression,
- - the FormalParameters and AsyncFunctionBody of an AsyncFunctionDeclaration or AsyncFunctionExpression, or
- - the FormalParameters and AsyncGeneratorBody of an AsyncGeneratorDeclaration or AsyncGeneratorExpression,

ç„¶å,ä¸è¯¥å£°æ˜æˆ–è¡¨è¾¾å¼çš„BindingIdentifier(å¦‚æœæœ‰)åŒ¹é…çš„æºæ–‡æœ¬ä¹ŸåŒ…å«åœ¨ç›¸åº”å‡½æ•°çš„å‡½æ•°ä»£ç ä¸­ã€‚

- æ¨¡å—ä»£ç æ˜¯æºæ–‡æœ¬,å®ƒæ˜¯ä½œä¸ºModuleBodyæä¾›çš„ä»£ç ã€‚ åˆå§‹åŒ–æ¨¡å—æ—¶ç›´æ¥è¯„ä¼°è¯¥ä»£ç ã€‚ ç‰¹å®šæ¨¡å—çš„æ¨¡å—ä»£ç ä¸åŒ…å«ä»»ä½•æºæ–‡æœ¬,è¿™äº›æºæ–‡æœ¬æ˜¯ä½œä¸ºåµŒå¥—çš„FunctionDeclaration,FunctionExpression,GeneratorDeclaration,GeneratorExpression,AsyncFunctionDeclaration,AsyncFunctionExpression,AsyncGeneratorDeclaration,AsyncGeneratorExpression,MethodDefinition,ArrowFunction,AsyncArrowFunction,ClassDeclarationæˆ–ClassExpressionçš„ä¸€éƒ¨åˆ†è¿›è¡Œè§£æçš„ã€‚

>NOTE1 å‡½æ•°ä»£ç é€šå¸¸ä½œä¸ºå‡½æ•°å®šä¹‰(14.1)ã€ç®­å¤´å‡½æ•°å®šä¹‰(14.2)ã€æ–¹æ³•å®šä¹‰(14.3)ã€ç”Ÿæˆå™¨å‡½æ•°å®šä¹‰(14.4)ã€å¼‚æ­¥å‡½æ•°å®šä¹‰(14.7)ã€å¼‚æ­¥ç”Ÿæˆå™¨å‡½æ•°å®šä¹‰(14.5)å’Œå¼‚æ­¥ç®­å¤´å‡½æ•°(14.8)çš„ä¸»ä½“æä¾›ã€‚å‡½æ•°ä»£ç ä¹Ÿä»å‡½æ•°æ„é€ å‡½æ•°(19.2.1.1)ã€GeneratorFunctionæ„é€ å‡½æ•°(26.2.1.1)å’ŒAsyncFunctionæ„é€ å‡½æ•°(26.7.1.1)çš„å‚æ•°æ´¾ç”Ÿè€Œæ¥ã€‚

>NOTE2 åœ¨å‡½æ•°ä»£ç ä¸­åŒ…å«BindingIdentifierçš„å®é™…æ•ˆæœæ˜¯,å°†strictæ¨¡å¼ä»£ç çš„æ—©æœŸé”™è¯¯åº”ç”¨äºBindingIdentifier,è¯¥æ ‡è¯†ç¬¦æ˜¯å…¶ä¸»ä½“åŒ…å«â€œuse strictâ€æŒ‡ä»¤çš„å‡½æ•°çš„åç§°,å³ä½¿å‘¨å›´çš„ä»£ç ä¸æ˜¯strictæ¨¡å¼ä»£ç ã€‚


### 11.2.1 æŒ‡ä»¤åºè¨€å’Œä½¿ç”¨ä¸¥æ ¼æŒ‡ä»¤(Directive Prologues and the Use Strict Directive)

æŒ‡ä»¤åºè¨€æ˜¯ä½œä¸ºFunctionBodyã€ScriptBodyæˆ–ModuleBodyçš„åˆå§‹è¯­å¥ListItemsæˆ–ModuleItemså‡ºç°çš„æœ€é•¿ExpressionStatementsåºåˆ—,å…¶ä¸­åºåˆ—ä¸­çš„æ¯ä¸ªExpressionStatementå®Œå…¨ç”±åè·Ÿåˆ†å·çš„StringLiteralæ ‡è®°ç»„æˆã€‚åˆ†å·å¯ä»¥æ˜¾å¼å‡ºç°,ä¹Ÿå¯ä»¥é€šè¿‡è‡ªåŠ¨æ’å…¥åˆ†å·æ¥æ’å…¥(11.9)ã€‚æŒ‡ä»¤åºè¨€å¯ä»¥æ˜¯ç©ºåºåˆ—ã€‚

ä½¿ç”¨ä¸¥æ ¼æŒ‡ä»¤æ˜¯æŒ‡ä»¤åºè¨€ä¸­çš„ExpressionStatement,å…¶StringLiteralæ˜¯"use strict"æˆ–'use strict'çš„ç¡®åˆ‡ä»£ç ç‚¹åºåˆ—ã€‚ ä½¿ç”¨ä¸¥æ ¼æŒ‡ä»¤å¯èƒ½ä¸åŒ…å«EscapeSequenceæˆ–LineContinuationã€‚

æŒ‡ä»¤åºè¨€å¯ä»¥åŒ…å«å¤šä¸ªUse StrictæŒ‡ä»¤ã€‚ä½†æ˜¯ï¼Œå¦‚æœå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œå®ç°å¯èƒ½ä¼šå‘å‡ºè­¦å‘Šã€‚

>NOTE æŒ‡ä»¤åºè¨€çš„ExpressionStatementè¯­å¥é€šå¸¸åœ¨åŒ…å«äº§ç”Ÿå¼çš„è¡¨è¿°è¿‡ç¨‹ä¸­è¿›è¡Œè¯„ä¼°ã€‚ å®ç°å¯ä»¥ä¸ºExpressionStatementå®šä¹‰å®ç°ç‰¹å®šçš„å«ä¹‰,è¿™äº›å«ä¹‰ä¸æ˜¯"use strict"æŒ‡ä»¤,è€Œæ˜¯åœ¨æŒ‡ä»¤åºè¨€ä¸­å‡ºç°ã€‚ å¦‚æœå­˜åœ¨é€‚å½“çš„é€šçŸ¥æœºåˆ¶,åˆ™å¦‚æœå®ç°åœ¨æŒ‡ä»¤åºè¨€ä¸­é‡åˆ°ä¸æ˜¯Use StrictæŒ‡ä»¤ä¸”æ²¡æœ‰å®ç°å®šä¹‰çš„å«ä¹‰çš„ExpressionStatement,åˆ™è¯¥å®ç°åº”å‘å‡ºè­¦å‘Šã€‚

### 11.2.2 Strict Mode Code

ECMAScriptè¯­æ³•å•å…ƒå¯ä»¥ä½¿ç”¨æ— é™åˆ¶æˆ–ä¸¥æ ¼æ¨¡å¼çš„è¯­æ³•å’Œè¯­ä¹‰(4.3.2)è¿›è¡Œå¤„ç†ã€‚åœ¨ä»¥ä¸‹æƒ…å†µä¸‹,ä»£ç è¢«è§£é‡Šä¸ºä¸¥æ ¼æ¨¡å¼ä»£ç ï¼š

- Global code is strict mode code if it begins with a Directive Prologue that contains a Use Strict Directive.
- Module code is always strict mode code.
- All parts of a ClassDeclaration or a ClassExpression are strict mode code.
- Eval code is strict mode code if it begins with a Directive Prologue that contains a Use Strict Directive or if the call to eval is a direct eval that is contained in strict mode code.
- Function code is strict mode code if the associated FunctionDeclaration, FunctionExpression, GeneratorDeclaration, GeneratorExpression, AsyncFunctionDeclaration, AsyncFunctionExpression, AsyncGeneratorDeclaration, AsyncGeneratorExpression, MethodDefinition, ArrowFunction, or AsyncArrowFunction is contained in strict mode code or if the code that produces the value of the function's [[ECMAScriptCode]] internal slot begins with a Directive Prologue that contains a Use Strict Directive.
- Function code that is supplied as the arguments to the built-in Function, Generator, AsyncFunction, and AsyncGenerator constructors is strict mode code if the last argument is a String that when processed is a FunctionBody that begins with a Directive Prologue that contains a Use Strict Directive.


è¯´æ˜:

- å¦‚æœå…¨å±€ä»£ç ä»¥åŒ…å«ä½¿ç”¨ä¸¥æ ¼æŒ‡ä»¤çš„æŒ‡ä»¤åºè¨€å¼€å¤´,åˆ™å®ƒæ˜¯ä¸¥æ ¼æ¨¡å¼ä»£ç ã€‚
- æ¨¡å—ä»£ç å§‹ç»ˆæ˜¯ä¸¥æ ¼æ¨¡å¼ä»£ç ã€‚
- ClassDeclarationæˆ–ClassExpressionçš„æ‰€æœ‰éƒ¨åˆ†éƒ½æ˜¯ä¸¥æ ¼æ¨¡å¼ä»£ç ã€‚
- å¦‚æœEvalä»£ç ä»¥åŒ…å«ä½¿ç”¨ä¸¥æ ¼æŒ‡ä»¤çš„æŒ‡ä»¤åºè¨€å¼€å¤´,æˆ–è€…å¦‚æœevalçš„è°ƒç”¨æ˜¯ä¸¥æ ¼æ¨¡å¼ä»£ç ä¸­åŒ…å«çš„ç›´æ¥eval,åˆ™Evalä»£ç ä¸ºä¸¥æ ¼æ¨¡å¼ä»£ç ã€‚
- å¦‚æœåœ¨ä¸¥æ ¼æ¨¡å¼ä»£ç ä¸­åŒ…å«ç›¸å…³çš„FunctionDeclaration,FunctionExpression,GeneratorDeclaration,GeneratorExpression,AsyncFunctionDeclaration,AsyncFunctionExpression,AsyncGeneratorDeclaration,AsyncGeneratorExpression,MethodDefinition,ArrowFunctionæˆ–AsyncArrowFunction,åˆ™å‡½æ•°ä»£ç ä¸ºä¸¥æ ¼æ¨¡å¼ä»£ç ,æˆ–è€…äº§ç”Ÿè¯¥å‡½æ•°å€¼[[[ ECMAScriptCode]]å†…éƒ¨æ’æ§½ä»¥åŒ…å«ä½¿ç”¨ä¸¥æ ¼æŒ‡ä»¤çš„æŒ‡ä»¤åºè¨€å¼€å¤´ã€‚
- å¦‚æœæœ€åä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²,åˆ™è¯¥å‡½æ•°ä»£ç ä½œä¸ºå†…ç½®å‡½æ•°,ç”Ÿæˆå™¨,AsyncFunctionå’ŒAsyncGeneratoræ„é€ å‡½æ•°çš„å‚æ•°æä¾›çš„å‡½æ•°ä»£ç æ˜¯ä¸¥æ ¼æ¨¡å¼ä»£ç ,è¯¥å­—ç¬¦ä¸²åœ¨å¤„ç†æ—¶æ˜¯ä¸€ä¸ªä»¥åŒ…å«â€œä½¿ç”¨ä¸¥æ ¼â€çš„æŒ‡ä»¤åºè¨€å¼€å¤´çš„FunctionBodyæŒ‡ç¤ºã€‚

ä¸æ˜¯ä¸¥æ ¼æ¨¡å¼ä»£ç çš„ECMAScriptä»£ç ç§°ä¸ºéä¸¥æ ¼ä»£ç ã€‚

### 11.2.3 Non-ECMAScript Functions

ECMAScriptå®ç°å¯ä»¥æ”¯æŒå¯¹å‡½æ•°å¼‚è´¨å¯¹è±¡çš„æ±‚å€¼,è¿™äº›å¯¹è±¡çš„æ±‚å€¼è¡Œä¸ºæ˜¯ä»¥ä¸»æœºå®šä¹‰çš„å¯æ‰§è¡Œä»£ç å½¢å¼è€Œä¸æ˜¯é€šè¿‡ECMAScriptä»£ç æ¥è¡¨ç¤ºçš„ã€‚ä»è°ƒç”¨æˆ–è¢«éECMAScriptå‡½æ•°è°ƒç”¨çš„ECMAScriptä»£ç å‡½æ•°çš„è§’åº¦æ¥çœ‹,å‡½æ•°å¯¹è±¡æ˜¯ECMAScriptä»£ç å‡½æ•°è¿˜æ˜¯éECMAScriptå‡½æ•°åœ¨è¯­ä¹‰ä¸Šæ˜¯ä¸å¯è§‚å¯Ÿçš„ã€‚


